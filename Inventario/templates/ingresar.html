{% extends 'base.html' %}
{% block title %}Ingresar Inventario{% endblock %}

{% block content %}
    <h2>Ingreso de Inventario ({{ session['usuario'] }})</h2>

    <form action="{{ url_for('guardar_inventario') }}" method="POST">
        
        {% if session['rol'] == 'Admin' %}
        <h2>Registrar Pesos</h2>
            
            <div class="form-group">
                <label for="grado_acero">Grado de Acero (Escribir):</label>
                <input type="text" name="grado_acero" required>
            </div>
            <div class="form-group">
                <label for="diametro">Diámetro (mm) (Escribir):</label>
                <input type="number" step="0.01" name="diametro" required>
            </div>
            
            <div class="form-group">
                <label for="proveedor">Proveedor:</label>
                <select name="proveedor" required>
                    {% for p in proveedores %}<option value="{{ p }}">{{ p }}</option>{% endfor %}
                </select>
            </div>

            <fieldset style="border: 1px solid #ccc; padding: 1rem; border-radius: 5px; margin-bottom: 1rem;">
                <legend>5 Pesos (para Promedio)</legend>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <input type="number" step="0.01" name="peso1" placeholder="Peso 1 (kg)">
                    <input type="number" step="0.01" name="peso2" placeholder="Peso 2 (kg)">
                    <input type="number" step="0.01" name="peso3" placeholder="Peso 3 (kg)">
                    <input type="number" step="0.01" name="peso4" placeholder="Peso 4 (kg)">
                    <input type="number" step="0.01" name="peso5" placeholder="Peso 5 (kg)">
                </div>
            </fieldset>

            <fieldset style="border: 1px solid var(--azul-principal); padding: 1rem; border-radius: 5px;">
                <legend>3 Pesos Exactos (Informativos)</legend>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
                    <input type="number" step="0.01" name="exacto1" placeholder="Exacto 1">
                    <input type="number" step="0.01" name="exacto2" placeholder="Exacto 2">
                    <input type="number" step="0.01" name="exacto3" placeholder="Exacto 3">
                </div>
            </fieldset>

        {% else %}
        <h2>Registrar Rollos</h2>
            <div class="form-group">
                <label for="grado_acero">Grado de Acero (Filtro):</label>
                <select name="grado_acero" required>
                    {% if not grados_invitado %}<option value="">-- Esperando al Admin --</option>{% endif %}
                    {% for g in grados_invitado %}<option value="{{ g }}">{{ g }}</option>{% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="diametro">Diámetro (mm) (Filtro):</label>
                <select name="diametro" required>
                    {% if not diametros_invitado %}<option value="">-- Esperando al Admin --</option>{% endif %}
                    {% for d in diametros_invitado %}<option value="{{ d }}">{{ d }}</option>{% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="proveedor">Proveedor:</label>
                <select name="proveedor" required>
                    {% for p in proveedores %}<option value="{{ p }}">{{ p }}</option>{% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="cantidad_rollos">Cantidad de Rollos:</label>
                <input type="number" name="cantidad_rollos" required style="border: 2px solid var(--verde-invitado);">
            </div>
        {% endif %}

        <button type="submit" class="btn btn-principal">Guardar Registro</button>
    </form>
{% endblock %}